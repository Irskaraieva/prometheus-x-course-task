{"ast":null,"code":"import{useContext,useEffect}from\"react\";import{Link}from\"react-router-dom\";import SinglePursheBook from\"./SinglePursheBook\";import EmptyCart from\"../../components/emptyCart/EmptyCart\";import img from\"./../../images/imageNotFound.png\";import{AiFillDelete}from'react-icons/ai';import{CartItemCount}from\"../../context/CartContext\";import{ContextLogin}from\"../../helpers/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PurchaseList=function PurchaseList(){var _useContext=useContext(CartItemCount),cart=_useContext.cart,setCart=_useContext.setCart;var _useContext2=useContext(ContextLogin),userName=_useContext2.userName;useEffect(function(){var cartContent=JSON.parse(localStorage.getItem(\"cart\"))||[];if(cart){setCart(cartContent);}},[]);var cartItems=Object.values(cart);var totalPriceSum=parseFloat(cartItems.reduce(function(acc,_ref){var totalPrice=_ref.totalPrice;return acc+totalPrice;},0)).toFixed(2);var handleDelete=function handleDelete(id){var newCart=cartItems.filter(function(el){return el.id!==id;});setCart(newCart);localStorage.setItem(\"cart\",JSON.stringify(newCart));};var cleanCart=function cleanCart(){setCart([]);localStorage.removeItem(\"cart\");};if(!userName){return/*#__PURE__*/_jsx(\"div\",{children:\"Please back to enter your name to be able to enter the store...\"});}return/*#__PURE__*/_jsx(\"main\",{className:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"purchaseList\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"purchase\",onClick:function onClick(){return cleanCart();},children:/*#__PURE__*/_jsx(\"span\",{children:\"Purchase\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"purchase__total__btn\",children:[cartItems.length>0?/*#__PURE__*/_jsx(Link,{to:\"/book-list\",className:\"back__to__store\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"purchase__to__store\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Back to the store\"})})}):null,/*#__PURE__*/_jsxs(\"span\",{className:\"total__price__pur\",children:[\"Total price, $ \",totalPriceSum]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list__items\",children:cartItems.length>0?cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"single__li\",children:[/*#__PURE__*/_jsx(SinglePursheBook,{id:item.id,title:item.title,img:item.image||img,price:item.price,totalPrice:parseFloat(item.totalPrice).toFixed(2),count:item.quantity,handleDelete:handleDelete}),/*#__PURE__*/_jsx(AiFillDelete,{className:\"dlete__cart\",onClick:function onClick(){return handleDelete(item.id);}})]},item.id);}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EmptyCart,{}),localStorage.removeItem(\"cart\")]})})]})});};export default PurchaseList;","map":{"version":3,"names":["useContext","useEffect","Link","SinglePursheBook","EmptyCart","img","AiFillDelete","CartItemCount","ContextLogin","PurchaseList","cart","setCart","userName","cartContent","JSON","parse","localStorage","getItem","cartItems","Object","values","totalPriceSum","parseFloat","reduce","acc","totalPrice","toFixed","handleDelete","id","newCart","filter","el","setItem","stringify","cleanCart","removeItem","length","map","item","title","image","price","quantity"],"sources":["/home/ira/Стільниця/react/my-app/src/components/purchaseList/PurchaseList.js"],"sourcesContent":["import { useContext, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport SinglePursheBook from \"./SinglePursheBook\";\nimport EmptyCart from \"../../components/emptyCart/EmptyCart\";\nimport img from \"./../../images/imageNotFound.png\";\nimport { AiFillDelete } from 'react-icons/ai';\nimport { CartItemCount } from \"../../context/CartContext\";\nimport { ContextLogin } from \"../../helpers/Context\";\n\n\n  const PurchaseList = () => {\n    const { cart, setCart } = useContext(CartItemCount);\n    const { userName } = useContext(ContextLogin);\n\n    useEffect ( () => {\n        const cartContent = JSON.parse(localStorage.getItem(\"cart\")) || [];\n        if (cart) {\n            setCart(cartContent)\n        }\n    }, [])\n\n    const cartItems = Object.values(cart);\n    const totalPriceSum = parseFloat(cartItems.reduce((acc, {totalPrice}) => acc + totalPrice, 0)).toFixed(2);\n\n    const handleDelete = (id) => {\n      const newCart = cartItems.filter(el => el.id !== id);\n      setCart(newCart);   \n      localStorage.setItem(\"cart\", JSON.stringify(newCart));\n    };\n\n    const cleanCart = () => {\n      setCart([]);\n      localStorage.removeItem(\"cart\");\n    }\n\n    if (!userName) {\n      return (\n        <div>\n          Please back to enter your name to be able to enter the store...\n        </div>\n      );\n    }\n\n  return (\n    <main className=\"main\">\n      <div className=\"purchaseList\">\n        <button type=\"submit\" className=\"purchase\" onClick={() => cleanCart()}>\n          <span>Purchase</span>\n        </button>\n      \n        <div className=\"purchase__total__btn\">\n                {cartItems.length > 0 ? (\n                  <Link to='/book-list' className=\"back__to__store\">\n                    <button type=\"submit\" className=\"purchase__to__store\">\n                      <span>Back to the store</span>\n                    </button>\n                  </Link>\n                ) : null}\n                <span className=\"total__price__pur\">\n                  Total price, $ {totalPriceSum}\n                </span>\n        </div>\n\n        <div className=\"list__items\">\n\n           {cartItems.length > 0 ? (\n            cartItems.map((item) => (\n                <div className=\"single__li\" key={item.id} >\n                    <SinglePursheBook\n                        id={item.id}\n                        title={item.title}\n                        img={item.image || img}\n                        price={item.price}\n                        totalPrice={parseFloat(item.totalPrice).toFixed(2)}\n                        count={item.quantity}\n                        handleDelete={handleDelete}\n                    />\n                    <AiFillDelete className=\"dlete__cart\" onClick={() => handleDelete(item.id)}/>\n                </div>\n            ))            \n          ) : (\n            <>\n              <EmptyCart />\n              {localStorage.removeItem(\"cart\")}\n            </>\n          )}\n        </div>\n      </div>\n    </main>\n  );\n};\n\nexport default PurchaseList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}